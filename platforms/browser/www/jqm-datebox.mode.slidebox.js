(function(d){d.extend(d.mobile.datebox.prototype.options,{themeDatePick:"b",themeDate:"a",useSetButton:!0,validHours:!1,slen:{y:9,m:14,d:16,h:16,i:30}});d.extend(d.mobile.datebox.prototype,{_sbox_pos:function(){var a,e,c,i,f,j=this;j.d.intHTML.find("div.ui-datebox-sliderow-int").each(function(){e=d(this);i=e.parent().outerWidth();a=e.outerWidth();c=j.__("isRTL")?e.find("div").last():e.find("div").first();f=e.find("div").size()*c.outerWidth();0<a&&(f=a);c.css("marginLeft",-1*((f-i)/2))})},_sbox_mktxt:{y:function(a){return["slideyear",
this.theDate.get(0)+a]},m:function(a){a=this.theDate.copy([0],[0,0,1]).adj(1,a);return["slidemonth",this.__("monthsOfYearShort")[a.get(1)]]},d:function(a){a=this.theDate.copy([0,0,a]);return["slideday",a.get(2)+"<br /><span class='ui-datebox-slidewday'>"+this.__("daysOfWeekShort")[a.getDay()]+"</span>"]},h:function(a){a=this.theDate.copy([0,0,0,a]);return["slidehour",12===this.__("timeFormat")?this._formatter("%-I<span class='ui-datebox-slidewday'>%p</span>",a):a.get(3)]},i:function(a){return["slidemins",
this._zPad(this.theDate.copy([0,0,0,0,a]).get(4))]}}});d.extend(d.mobile.datebox.prototype._build,{slidebox:function(){var a,e,c,i,f,j,b=this,g=this.options,h=this.drag,l=d("<div class='ui-datebox-sliderow-int'></div>"),m=d("<div>"),k=d("<div>",{"class":"ui-datebox-slide"});if("boolean"!==typeof b.d.intHTML)b.d.intHTML.remove().empty();else b.d.input.on("datebox",function(a,c){"postrefresh"===c.method&&b._sbox_pos()});b.d.headerText=!1!==b._grabLabel()?b._grabLabel():b.__("titleDateDialogLabel");
b.d.intHTML=d("<span class='ui-datebox-nopad'>");b.fldOrder=b.__("slideFieldOrder");b._check();b._minStepFix();d("<div class='ui-datebox-header'><h4>"+b._formatter(b.__("headerFormat"),b.theDate)+"</h4></div>").appendTo(b.d.intHTML);b.d.intHTML.append(k);for(e=0;e<b.fldOrder.length;e++)if(f=b.fldOrder[e],i=m.clone().addClass("ui-datebox-sliderow").data("rowtype",f),c=l.clone().data("rowtype",f).appendTo(i),!0===b.__("isRTL")&&c.css("direction","rtl"),"function"===typeof b._sbox_mktxt[f]){for(a=-1*
g.slen[f];a<g.slen[f]+1;a++)j=b._sbox_mktxt[f].apply(b,[a]),d("<div>",{"class":"ui-datebox-slidebox ui-datebox-"+j[0]+" ui-btn ui-btn-"+(0===a?g.themeDatePick:g.themeDate)}).html(j[1]).data("offset",a).appendTo(c);i.appendTo(k)}if(g.useSetButton||g.useClearButton)e=d("<div>",{"class":"ui-datebox-controls ui-datebox-repad"}),g.useSetButton&&e.append(b._stdBtn.close.apply(b,[b.__("setDateButtonLabel")])),g.useClearButton&&e.append(b._stdBtn.clear.apply(b)),g.useCollapsedBut?(e.controlgroup({type:"horizontal"}),
e.addClass("ui-datebox-collapse")):e.controlgroup(),e.appendTo(b.d.intHTML);if(b.wheelExists)b.d.intHTML.on("mousewheel",".ui-datebox-sliderow-int",function(a,c){a.preventDefault();b._offset(d(this).data("rowtype"),(0>c?-1:1)*("i"===d(this).data("rowtype")?g.minuteStep:1))});b.d.intHTML.on(g.clickEvent,".ui-datebox-sliderow-int>div",function(a){a.preventDefault();b._offset(d(this).parent().data("rowtype"),parseInt(d(this).data("offset"),10))});b.d.intHTML.on(h.eStart,".ui-datebox-sliderow-int",function(a){h.move||
(h.move=!0,h.target=d(this),h.pos=parseInt(h.target.css("marginLeft").replace(/px/i,""),10),h.start=b.touch?a.originalEvent.changedTouches[0].pageX:a.pageX,h.end=!1,a.stopPropagation(),a.preventDefault())})}});d.extend(d.mobile.datebox.prototype._drag,{slidebox:function(){var a=this,e=this.options,c=this.drag;d(document).on(c.eMove,function(d){if(c.move&&"slidebox"===e.mode)return c.end=a.touch?d.originalEvent.changedTouches[0].pageX:d.pageX,c.target.css("marginLeft",c.pos+c.end-c.start+"px"),d.preventDefault(),
d.stopPropagation(),!1});d(document).on(c.eEnd,function(d){c.move&&"slidebox"===e.mode&&(c.move=!1,!1!==c.end&&(d.preventDefault(),d.stopPropagation(),c.tmp=c.target.find("div").first(),a._offset(c.target.data("rowtype"),(a.__("isRTL")?-1:1)*parseInt((c.start-c.end)/c.tmp.innerWidth(),10)*("i"===c.target.data("rowtype")?e.minuteStep:1))),c.start=!1,c.end=!1)})}})})(jQuery);