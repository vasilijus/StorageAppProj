(function(a){a.extend(a.mobile.datebox.prototype.options,{themeButton:"a",themeInput:"a",useSetButton:true,customData:[],customDefault:[0,0,0],customFormat:false,customeHead:false,customboxlang:{customSet:"Looks Good",}});a.extend(a.mobile.datebox.prototype,{_cbox_offset:function(e,d){var b=this,c,f=this.options;c=(b.customCurrent[e]+d)%f.customData[e].data.length;if(c<0){c=f.customData[e].data.length+c}b.customCurrent[e]=c;if(f.useImmediate){b._t({method:"set",value:b._formatter(f.customFormat,b.customCurrent),custom:b.customCurrent})}b.refresh()}});a.extend(a.mobile.datebox.prototype._parser,{custombox:function(b){return(b.length<1||!b.match(/,/))?this.options.customDefault:b.split(",")}});a.extend(a.mobile.datebox.prototype._customformat,{custombox:function(f,e,d){var b=parseInt(f),c;if(typeof(b)==="number"&&!isNaN(b)){return e[f-1]}else{c=a.inArray(f,["a","b","c","d","e","f"]);return d.customData[c].data[e[c]]}}});a.extend(a.mobile.datebox.prototype._build,{custombox:function(){var r=this,c=this.options,h,q,j,d=-2,n="ui-datebox-",p=a("<div>"),b=a("<fieldset>"),f=p.clone(),g=b.clone(),k=this._makeDate(this.d.input.val()),e=a("<div>").addClass("ui-input-text ui-corner-all ui-shadow-inset ui-body-"+c.themeInput).css({padding:".4em",margin:".5em 0",textAlign:"center"}),m=a("<div>"),l="ui-btn-inline ui-link ui-btn ui-btn-"+c.themeButton+" ui-btn-icon-notext ui-shadow ui-corner-all";if(typeof r.customCurrent==="undefined"){r.customCurrent=k}if(c.customFormat===false){j=[];for(h=0;h<c.customData.length;h++){j.push("%X"+(h+1))}c.customFormat=j.join(",")}if(typeof r.d.intHTML!=="boolean"){r.d.intHTML.empty().remove()}r.d.headerText=((c.customHead!==false)?c.customHead:((r._grabLabel()!==false)?r._grabLabel():""));r.d.intHTML=a("<span>");r.dateOK=true;for(h=0;h<c.customData.length;h++){j=r._gridblk.b[h];a("<div>").append(e.clone().html(c.customData[h].data[r.customCurrent[h]])).addClass("ui-block-"+j).appendTo(f);r._makeEl(m,{attr:{field:h,amount:1}}).addClass(n+"cbut ui-block-"+j+" ui-icon-plus "+l).appendTo(b);r._makeEl(m,{attr:{field:h,amount:-1}}).addClass(n+"cbut ui-block-"+j+" ui-icon-minus "+l).appendTo(g);d++}b.addClass("ui-grid-"+r._gridblk.b[d]).appendTo(r.d.intHTML);f.addClass("ui-datebox-dboxin ui-grid-"+r._gridblk.b[d]).appendTo(r.d.intHTML);g.addClass("ui-grid-"+r._gridblk.b[d]).appendTo(r.d.intHTML);if(c.useSetButton||c.useClearButton){q=a("<div>",{"class":n+"controls"});if(c.useSetButton){q.append(a("<a href='#' role='button'>"+r.__("customSet")+"</a>").addClass("ui-btn ui-btn-"+c.themeSetButton+" ui-icon-check ui-btn-icon-left ui-shadow ui-corner-all").on(c.clickEventAlt,function(i){i.preventDefault();r._t({method:"set",value:r._formatter(c.customFormat,r.customCurrent),date:r.customCurrent});r._t({method:"close"})}))}if(c.useClearButton){q.append(r._stdBtn.clear.apply(r))}if(c.useCollapsedBut){q.controlgroup({type:"horizontal"});q.addClass("ui-datebox-collapse")}q.appendTo(r.d.intHTML)}f.on("change","input",function(){r.refresh()});r.d.intHTML.on(c.clickEvent,"."+n+"cbut",function(i){i.preventDefault();r._cbox_offset(a(this).data("field"),a(this).data("amount"))})}})})(jQuery);